---
title: 小雷的冰茶几-----裸并查集
date: 2017-08-14 09:05:13
categories: 数据结构
---
Problem Description  
  
小雷有个特殊的癖好，平时喜欢收藏各种稀奇古怪的东西，譬如。。。。,还有。。。。，也包括。。。。。小雷是一个喜欢分享的童鞋，这次小雷又给大家带来一套神奇的东西，那就是举世无双的冰茶几！  
顾名思义，这些茶几被冰冻住了，最主要的是他们是易碎品，毕竟被冻住了。因此小雷要很小心翼翼的移动他们。一些茶几是冻在一起的，因此一套冰茶几分为好几部分，并且如果茶几<!-- more -->A与B冻在一起，B与C冻在一起，那么A与C也就冻在了，即冰冻状态有传递性，ABC此时会看作一个整体。  
为了保证冰茶几的完整性，小雷每次只能移动一整块冰茶几，也就是冰冻在一起的一部分。小雷想知道他需要搬几次才能全部搬到实验室，你能帮小雷快速计算出答案么？  
Input  
  
多组输入，先输入组数T（1 < = T < = 200）。  
对于每组输入，先输入一个整数n（1 < = n < = 100000），k（0 < = k < = 100000），茶几编号1~n。  
之后k行，每行两数x，y（1 < = x，y < = n），表示第x个茶几和第y个茶几冰冻在一起。  
Output  
  
对于每组输入，先输出”Case z: ”（不带引号）表示组数，再输出一个整数，表示小雷需要搬动的次数。  
Example Input  
  
3  
3 1  
1 2  
5 2  
1 2  
3 4  
5 2  
1 2  
2 3  
  
Example Output  
  
Case 1: 2  
Case 2: 3  
Case 3: 3  

并查集知识点： 推荐啊哈算法中的讲解，图文并茂，通俗易懂。  

    
    
    #include <iostream>
    #include <cstring>
    #include <cstdio>
    using namespace std;
     int a[100100];
    int get_boss(int x)
    {
        if(a[x]==x)  return x;
        else
        {
            a[x]=get_boss(a[x]);//一个递归的过程，自己模拟一下就能明白了
            return a[x];
        }
    }
    void mergy (int x, int y)
    {
        int t1, t2;//代指xy的boos
        t1=get_boss(x);
        t2=get_boss(y);//寻找xy的boss
        if(t1!=t2)//靠左原则
        a[t2]=t1;
        return ;
    }
    int main ()
    {
        int t,n,m,x,y;
        while(cin>>t)
        {
            int tt=1;
            while(t--)
            {
                memset(a,0,sizeof(a));
                cin>>n>>m;
                for(int i=0; i<=n; i++)
                {
                    a[i]=i;
                }
                for(int i=0; i<m; i ++)
                {
                    scanf("%d %d",&x,&y);
                    mergy(x,y);
                }
                int sum=0;
                for(int i=1;i<=n;i++)
                {
                    if(a[i]==i)
                    {
                        sum++;
                    }
                }
                printf("Case %d: %d\n",tt++,sum);
            }
        }
    }
    

  
  

